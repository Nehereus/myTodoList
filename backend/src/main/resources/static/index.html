<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TODO App</title>
    <style>
      :root{--accent:#fadc4f;--gap:12px}
      body{font-family:Inter,system-ui,Arial;margin:0;padding:16px;background:#f6f7fb}
      #app{display:grid;grid-template-columns:300px 1fr;gap:16px;align-items:start}
      #sidebar{background:#fff;padding:30px;border:3px solid #e6e6ef;border-radius:8px}
      #main{padding:8px}
      #app-title{margin:0 0 12px 0;font-size:1.25rem}
      .new-todo-form input,.new-todo-form textarea,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}
      .field-row{margin-bottom:10px}
      .field-row.horizontal{display:flex;gap:35px}
      .field-small{flex:1}
      #types-list{list-style:none;padding:0;margin:8px 0 0 0}
      #types-list .type{padding:8px;border-radius:6px;cursor:pointer;color:#444}
      #types-list .type.current{background:var(--accent);color:#fff}
      .todo-item{background:#fff;border:1px solid #e6e6ef;padding:12px;margin-bottom:10px;border-radius:8px;display:flex;gap:12px;align-items:flex-start}
      .todo-main{flex:1}
      .todo-header{display:flex;justify-content:space-between;align-items:center}
      .title{font-weight:600}
      .description{color:#555;margin-top:6px}
      .due{color:#999;margin-top:6px;font-size:0.9rem}
      .controls{display:flex;flex-direction:column;gap:8px}
      .edit-form input,.edit-form textarea,.edit-form select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px;margin-bottom:8px}
      .edit-row{display:flex;gap:8px}
      .edit-row .edit-due{flex:1}
      .edit-row .edit-category{width:140px}
      .edit-actions{display:flex;gap:8px}
      button{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
      /* Search bar */
      #search-bar{position:fixed;left:0;right:0;bottom:12px;display:flex;justify-content:center;pointer-events:auto}
      .search-inner{width:min(980px,calc(100% - 48px));display:flex;gap:8px;align-items:center;background:#fff;padding:8px;border-radius:8px;border:1px solid #e6e6ef}
      #search-input{flex:1;padding:8px;border:1px solid #ddd;border-radius:6px}
      #search-button{padding:8px 12px}
      #clear-search{background:transparent;color:#666;border:none;font-size:16px;padding:6px 8px;cursor:pointer}
      /* Auth overlay */
      #auth-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;z-index:9999}
      .auth-modal{background:#fff;padding:20px;border-radius:10px;max-width:420px;width:100%;box-shadow:0 6px 24px rgba(0,0,0,0.2)}
      .auth-modal h2{margin:0 0 8px}
      .auth-modal .muted{color:#666;font-size:0.9rem;margin-bottom:12px}
      .auth-modal label{display:block;margin-top:8px;font-size:0.85rem}
      .auth-modal input{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}
      .auth-actions{display:flex;gap:8px;margin-top:12px}
      #auth-error{color:#c00;margin-top:8px;min-height:18px}
    </style>
      <script type="module" crossorigin src="./assets/index-DzvG9lI8.js"></script>
    </head>
  <body>

    <div id="app">
      <aside id="sidebar">
        <h1 id="app-title">我的待办</h1>

        <!-- New todo form (already wired in main.ts) -->
        <div id="new-todo-area">
          <form id="new-todo-form" class="new-todo-form">
            <div class="field-row">
              <input
                type="text"
                id="new-todo-title"
                placeholder="标题（必填）"
                required
              />
            </div>

            <div class="field-row">
              <textarea
                id="new-todo-description"
                placeholder="描述（可选)"
                rows="3"
              ></textarea>
            </div>

            <div class="field-row horizontal">
              <div class="field-small">
                <label for="new-todo-due">截止日期</label>
                <input type="date" id="new-todo-due" />
              </div>
              <div class="field-small">
                <label for="new-todo-category">分类</label>
                <select id="new-todo-category">
                  <option value="all">全部</option>
                  <option value="inbox">收件箱</option>
                  <option value="personal">个人</option>
                  <option value="work">工作</option>
                  <option value="shopping">购物</option>
                </select>
              </div>
            </div>

            <div class="field-row">
              <button type="submit">添加</button>
            </div>
          </form>
        </div>

        <nav id="types-container">
          <h2>分类</h2>
          <ul id="types-list"></ul>
        </nav>
      </aside>

      <main id="main">
        <section id="todo-list-area">
          <div id="todo-list-container"></div>
        </section>
      </main>
    </div>

    <!-- Search bar fixed at bottom -->
    <div id="search-bar">
        <div class="search-inner">
        <button id="clear-search" title="清除搜索">✕</button>
        <input id="search-input" type="text" placeholder="按标题或描述搜索待办..." />
        <button id="search-button">搜索</button>
      </div>
    </div>

    <!-- Auth overlay (blocks app until user chooses local mode or authenticates) -->
    <div id="auth-overlay" aria-hidden="false">
      <div class="auth-modal">
        <h2>登录</h2>
        <p class="muted">Hi 你好！测试用户名：test，密码：12345</p>
        <p class="muted">登录以与后端同步，或选择“本地模式”离线使用此应用。</p>

        <label for="auth-username">用户名</label>
        <input id="auth-username" type="text" autocomplete="username" />

        <label for="auth-password">密码</label>
        <input id="auth-password" type="password" autocomplete="current-password" />

        <div class="auth-actions">
          <button id="auth-signin">登录</button>
          <button id="auth-local">本地模式</button>
        </div>
        <div id="auth-error" role="alert" aria-live="polite"></div>
      </div>
    </div>

  </body>
</html>